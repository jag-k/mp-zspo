<script src="/js/editor.js"></script>
% max_character = 150

<form action="" enctype="multipart/form-data" method="post">
  <div class="text-component text-center margin-bottom-sm">
    <h1>{{"Редактирвание" if data.get('title') else "Создание"}} поста</h1>
  </div>

  <div class="margin-bottom-sm">
    <label class="form-label margin-bottom-xxxs" for="title">Заголовок</label>
    <input class="form-control width-100%" content="{{data.get('title')}}" id="title" name="title"
           placeholder="Грандиозная новость!" required type="text">
  </div>

  <div class="margin-bottom-sm character-count js-character-count">
    <label class="form-label margin-bottom-xxs" for="description">Краткое описание:</label>
    <input class="form-control width-100% js-character-count__input" id="description" maxlength="{{max_character}}"
           name="description" required type="text">

    <div aria-atomic="true" aria-live="polite"
         class="character-count__helper character-count__helper--dynamic text-sm margin-top-xxxs">
      Осталось <span class="js-character-count__counter"></span> символов
    </div>

    <div class="character-count__helper character-count__helper--static text-sm margin-top-xxxs">Максимально
      {{max_character}} символов
    </div>
  </div>


  <div class="margin-bottom-sm">
    <label class="form-label margin-bottom-xxxs" for="category">Выберите категорию:</label>

    <div class="select">
      <select class="select__input form-control" id="category" name="category">
        <option disabled value="0">Select option</option>
        <optgroup label="Group 1">
          <option value="1">Option 1</option>
          <option value="2">Option 2</option>
        </optgroup>

        <optgroup label="Group 2">
          <option value="3">Option 3</option>
          <option value="4">Option 4</option>
          <option value="5">Option 5</option>
        </optgroup>
      </select>

      <svg aria-hidden="true" class="icon select__icon" viewBox="0 0 16 16">
        <g stroke="currentColor" stroke-width="1">
          <polyline fill="none" points="15.5,4.5 8,12 0.5,4.5" stroke="currentColor" stroke-linecap="round"
                    stroke-linejoin="round" stroke-miterlimit="10"></polyline>
        </g>
      </svg>
    </div>

  </div>


  <div class="margin-bottom-sm">
    <label class="form-label margin-bottom-xxs" for="content">Контент поста:</label>
    <textarea class="form-control width-100%" id="content" name="content"
              required>{{data.get("content", '')}}</textarea>
  </div>

  <script>
    Editor
      .create(document.querySelector('#content'), {})
      .then(editor => {
        window.editor = editor;
      })
      .catch(error => {
        console.error('Oops, something gone wrong!');
        console.error(error);
      });
  </script>

  <div class="margin-bottom-sm">
    <label class="form-label margin-bottom-xxxs" for="image">Изображение публикации</label>

    <div class="file-upload">
      <label class="file-upload__label btn btn--subtle" for="image">
        <span class="file-upload__text">Загрузить изображение</span>
      </label>

      <input accept="image/svg+xml,image/jpeg,image/png,image/gif" class="file-upload__input" id="image" name="image"
             required type="file">

      <img alt="Предпросмотр новости" class="file-upload__preview is-hidden" src="">

    </div>
  </div>

  <div class="margin-bottom-sm">
    <label class="form-label margin-bottom-xxxs" for="date">Дата публикации</label>
    <input class="form-control width-100%" id="date" name="date" required type="date" value="{{date}}">
  </div>

  <div class="flex flex-column flex-row@xs gap-xs">
    <button class="btn btn--primary btn--md width-100%" type="submit">Сохранить</button>
    <button class="btn btn--secondary btn--md width-100%" type="reset">Отменить изменения</button>
  </div>
</form>
